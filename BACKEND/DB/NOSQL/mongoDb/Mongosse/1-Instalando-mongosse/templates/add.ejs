<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Inserindo Links</title>
</head>

<body>
    <div class="container flex-column w-50">
        
        <h1>Adcionar Links</h1>
    
        <div>
            <form class="d-flex flex-column " action="/" method="POST">
    
                <input class="mb-2" type="text" name="titulo" placeholder="Titulo" value="<%=body.titulo%>" required oninvalid="this.setCustomValidity('Campo requerido')">
                <input class="mb-2" type="text" name="descricao" placeholder="Descrição" value="<%=body.descricao%>">
                <input class="mb-2" type="text" placeholder="Descrição" hidden>
                <input class="mb-2" type="text" name="url" placeholder="Digite a URL" value="<%=body.url%>" >
                <button class="btn btn-warning mb-2">Salvar</button>
            </form>
            <!-- O required : funcionar somente form -->
            <%if(error){%>
            <div class="alert alert-danger alert-dismissible fade show mt-3">
                <a href="" class="close" data-dismiss="alert">X</a>
                   <strong>Error: </strong> <%=error.message%>
            </div>
            <%}%>
        </div>
        <!-- <table>
            <thead>
                <th>Nome</th>
                <th>descricao</th>
                <th>URL de acesso</th>
            </thead>
            <tbody class="finish">
    
            </tbody>        
        </table> -->
    

    </div>
    <script>
        let result = document.querySelector(".finish");
        console.log(result);

        const url = "http://localhost:2001/all";
        fetch(url).then((resp) =>{
            return resp.json();
        }).then(data =>{
            
            console.log(data);

            for (let i = 0; i < data.length; i++) {

                result.innerHTML += `<tr>
                                        <td>${data[i].titulo}</td>
                                        <td>${data[i].descricao}</td>
                                        <td>${data[i].url}</td>
                                    </tr>`
            }
        })
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>

</html>